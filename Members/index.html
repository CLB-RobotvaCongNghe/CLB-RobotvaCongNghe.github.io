<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b1020" />
  <title>Th√†nh vi√™n ‚Äî CLB Robot & C√¥ng ngh·ªá (UNETI)</title>
  <meta name="description" content="Danh s√°ch v√† c∆° c·∫•u th√†nh vi√™n CLB Robot & C√¥ng ngh·ªá." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <link rel="stylesheet" href="../styles.css" />
</head>

<body>
  <div id="top"></div>

  <div class="bg">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <div class="grid"></div>
    <canvas id="stars" aria-hidden="true"></canvas>
  </div>

  <header class="topbar">
    <div class="container topbar__inner">
      <a class="brand" href="../" aria-label="V·ªÅ trang ch·ªß">
        <img src="../assets/logo.jpg" alt="Logo CLB Robot & C√¥ng ngh·ªá" class="brand__logo" />
        <div class="brand__text">
          <div class="brand__name">CLB Robot & C√¥ng ngh·ªá</div>
          <div class="brand__sub">Khoa ƒêi·ªán & T·ª± ƒë·ªông ho√° ‚Äî UNETI</div>
        </div>
      </a>

      <nav class="nav" aria-label="ƒêi·ªÅu h∆∞·ªõng">
        <button class="nav__toggle" id="navToggle" aria-label="M·ªü menu" aria-expanded="false">
          <i class="fa-solid fa-bars"></i>
        </button>
        <ul class="nav__list" id="navList">
          <li><a class="nav__link" href="../#gioi-thieu">Gi·ªõi thi·ªáu</a></li>
          <li><a class="nav__link" href="../#hoat-dong">Ho·∫°t ƒë·ªông</a></li>
          <li><a class="nav__link" href="../#san-choi">S√¢n ch∆°i</a></li>
          <li><a class="nav__link active" href="../Members/">Th√†nh vi√™n</a></li>
          <li><a class="nav__link" href="../Achievements/">Th√†nh t√≠ch</a></li>
          <li><a class="nav__link" href="../Competitions-Organized/">T·ªï ch·ª©c gi·∫£i</a></li>
          <li><a class="nav__link" href="../#lien-he">Li√™n h·ªá</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero" style="padding-bottom:12px;">
      <div class="container hero__grid" style="grid-template-columns:1fr;">
        <div class="hero__left reveal">
          <div class="chips">
            <span class="chip"><i class="fa-solid fa-link"></i> /Members</span>
            <span class="chip"><i class="fa-solid fa-house"></i>
              <a href="../" style="text-decoration:underline; text-underline-offset:4px;">Trang ch·ªß</a>
            </span>
          </div>

          <h1 class="hero__title">üë• Th√†nh vi√™n <span class="accent">‚öôÔ∏è</span></h1>
          <p class="hero__subtitle">Danh s√°ch v√† c∆° c·∫•u th√†nh vi√™n CLB Robot & C√¥ng ngh·ªá.</p>

          <div class="hero__cta">
            <a class="btn btn--ghost" href="../">
              <i class="fa-solid fa-arrow-left"></i> Quay v·ªÅ trang ch·ªß
            </a>
            <a class="btn btn--primary" href="../#tham-gia">
              <i class="fa-solid fa-user-plus"></i> Tham gia CLB
            </a>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="members" style = "padding: 0px;">
      <div class="container">
        <div class="panel reveal" style="margin-top:14px;">
          <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
            <div class="tag">L·ªçc nhanh</div>
            <select id="teamFilter" class="btn btn--ghost" style="padding:10px 12px;">
              <option value="__all__">T·∫•t c·∫£ ban</option>
            </select>

            <input id="memberSearch" class="btn btn--ghost" type="search"
              placeholder="T√¨m theo t√™n/ch·ª©c v·ª•/l·ªõp/m·∫£ng..."
              style="padding:10px 12px; min-width:min(420px, 100%);" />
          </div>
        </div>

        <div id="membersContent" style="margin-top:16px;"></div>

        <div id="membersEmpty" class="panel" style="margin-top:12px; display:none;">
          <h3 style="margin:0 0 8px;">Kh√¥ng c√≥ d·ªØ li·ªáu</h3>
          <p style="margin:0; color: rgba(234,240,255,.72); line-height:1.6;">
            Ki·ªÉm tra <b>Members/members.json</b> ho·∫∑c ch·∫°y site b·∫±ng server (kh√¥ng m·ªü file:///).
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer__inner">
      <div>
        ¬© <span id="year"></span> CLB Robot & C√¥ng ngh·ªá ‚Äî UNETI ‚Ä¢ Design by
        <a class="link" href="https://github.com/TranDangKhoaTechnology" target="_blank" rel="noopener">Tr∆∞·ªüng Ban Kƒ© Thu·∫≠t</a>
      </div>
      <div class="footer__right">
        <a class="link" href="#top">V·ªÅ ƒë·∫ßu trang ‚Üë</a>
      </div>
    </div>
  </footer>

  <button class="toTop" id="toTop" aria-label="L√™n ƒë·∫ßu trang">
    <i class="fa-solid fa-arrow-up"></i>
  </button>

  <script src="../script.js"></script>

  <!-- Render members.json -->
  <script>
    (function () {
      var host = document.getElementById("membersContent");
      var emptyBox = document.getElementById("membersEmpty");
      var teamFilter = document.getElementById("teamFilter");
      var searchInput = document.getElementById("memberSearch");
      if (!host) return;

      function esc(s) {
        return String(s || "")
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#039;");
      }

      function norm(s) {
        return String(s || "").toLowerCase().trim();
      }

      function cardHTML(m) {
        var name = esc(m.name || "Ch∆∞a ƒë·∫∑t t√™n");
        var cls = m.class ? esc(m.class) : "";
        var pos = esc(m.position || "");
        var avatar = esc(m.avatar || "../assets/thanhvien.jpg");
        var banner = m.banner ? esc(m.banner) : "";

        var resp = Array.isArray(m.responsibilities) ? m.responsibilities : [];
        var pills = resp.map(function (x) { return '<span class="pill">' + esc(x) + '</span>'; }).join("");

        var bannerStyle = banner
          ? 'style="background-image:url(\'' + banner + '\');"'
          : "";

        return (
          '<article class="card memberCard tilt" data-tilt>' +
            '<div class="memberBanner" ' + bannerStyle + ' aria-hidden="true"></div>' +

            '<div class="memberCardBody">' +
              '<div class="memberTop">' +
                '<img class="memberAvatar" src="' + avatar + '" alt="' + name + '">' +
                '<div class="memberInfo">' +
                  '<div class="memberName">' + name + '</div>' +
                  '<div class="memberMeta">' +
                    (cls ? ('<span class="memberMetaItem"><i class="fa-solid fa-graduation-cap"></i><span>' + cls + '</span></span>') : '') +
                    (pos ? ('<span class="memberMetaItem"><i class="fa-solid fa-id-badge"></i><span>' + pos + '</span></span>') : '') +
                  '</div>' +
                '</div>' +
              '</div>' +

              (pills
                ? ('<div class="pillRow memberPills">' + pills + '</div>')
                : '<p class="memberEmptyNote">Ch∆∞a c·∫≠p nh·∫≠t m·∫£ng ph·ª• tr√°ch.</p>') +
            '</div>' +
          '</article>'
        );
      }

      function render(groups, filterKey, q) {
        host.innerHTML = "";
        var total = 0;

        var qn = norm(q);
        var fk = filterKey || "__all__";

        groups.forEach(function (g) {
          var members = Array.isArray(g.members) ? g.members : [];
          var label = g.label || "Th√†nh vi√™n";
          var key = g.key || label;

          if (fk !== "__all__" && String(key) !== String(fk)) return;

          var filtered = members.filter(function (m) {
            if (!qn) return true;
            var hay = [
              m.name, m.class, m.position,
              (Array.isArray(m.responsibilities) ? m.responsibilities.join(" ") : "")
            ].map(norm).join(" | ");
            return hay.indexOf(qn) !== -1;
          });

          if (!filtered.length) return;

          total += filtered.length;

          host.insertAdjacentHTML("beforeend",
            '<div class="section__head" style="margin-top:18px;">' +
              '<h3 class="section__title" style="font-size:1.35rem; margin:0 0 6px;">' + esc(label) + '</h3>' +
              '<p class="section__desc" style="margin:0;">' + filtered.length + ' th√†nh vi√™n</p>' +
            '</div>' +
            '<div class="cards membersCards">' +
              filtered.map(cardHTML).join("") +
            '</div>'
          );
        });

        if (!total) {
          if (emptyBox) emptyBox.style.display = "block";
        } else {
          if (emptyBox) emptyBox.style.display = "none";
        }
      }

      fetch("./members.json", { cache: "no-store" })
        .then(function (r) { return r.json(); })
        .then(function (data) {
          var groups = Array.isArray(data && data.groups) ? data.groups : [];
          if (!groups.length) {
            if (emptyBox) emptyBox.style.display = "block";
            return;
          }

          if (teamFilter) {
            var opts = ['<option value="__all__">T·∫•t c·∫£ ban</option>'];
            groups.forEach(function (g) {
              var key = (g.key || "").toString();
              var label = (g.label || "").toString();
              if (!key || !label) return;
              opts.push('<option value="' + esc(key) + '">' + esc(label) + '</option>');
            });
            teamFilter.innerHTML = opts.join("");
          }

          function apply() {
            var fk = teamFilter ? teamFilter.value : "__all__";
            var q = searchInput ? searchInput.value : "";
            render(groups, fk, q);
          }

          if (teamFilter) teamFilter.addEventListener("change", apply);
          if (searchInput) searchInput.addEventListener("input", apply);

          apply();
        })
        .catch(function () {
          if (emptyBox) emptyBox.style.display = "block";
        });
    })();
  </script>

  <!-- CSS cho member card -->
  <style>
    .memberCard{
      position:relative;
      overflow:hidden;
    }

    .memberBanner{
      position:absolute;
      inset:0;
      z-index:0;
      background:
        radial-gradient(900px 260px at 10% 10%, rgba(124,92,255,.18), transparent 60%),
        radial-gradient(900px 260px at 80% 20%, rgba(0,212,255,.14), transparent 60%),
        radial-gradient(900px 260px at 50% 95%, rgba(34,255,138,.10), transparent 60%);
      opacity:.9;
      pointer-events:none;
      transform: scale(1.02);
    }

    .memberBanner[style*="background-image"]{
      background-size: cover;
      background-position: center;
      filter: saturate(1.05) contrast(1.05);
      opacity: .35;
    }

    .memberCardBody{
      position:relative;
      z-index:2;
    }

    .memberTop{
      display:flex;
      gap:12px;
      align-items:flex-start;
      margin-bottom:12px;
    }

    .memberAvatar{
      width:56px;
      height:56px;
      border-radius:16px;
      object-fit:cover;
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 12px 26px rgba(0,0,0,.35);
      flex: 0 0 auto;
    }

    .memberInfo{
      min-width:0;
      flex: 1 1 auto;
    }

    .memberName{
      font-weight:700;
      font-size:1.05rem;
      letter-spacing:.2px;
      overflow-wrap:anywhere;
      word-break:break-word;
    }

    .memberMeta{
      margin-top:6px;
      display:flex;
      flex-direction:column;
      gap:6px;
      align-items:flex-start;
      color: rgba(234,240,255,.72);
      font-size:.92rem;
    }

    .memberMetaItem{
      display:flex;
      gap:8px;
      align-items:flex-start;
      min-width:0;
      white-space:normal;
      overflow-wrap:anywhere;
      word-break:break-word;
      line-height:1.35;
    }

    .memberMetaItem span{
      display:block;
      max-width:100%;
    }

    .memberPills{ margin-top:10px; }
    .membersCards{ margin-top:10px; }

    .memberEmptyNote{
      margin:0;
      color: rgba(234,240,255,.72);
    }
  </style>
</body>
</html>
